<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <title>Document</title>
    <link rel="stylesheet" href="styles/log.css">
    <title>Document</title>
</head>

<body>

    <body class="ola">
        <div class="wrap" style="margin: auto;">
            <h1 style="text-align: center;">Sign In</h1>
    
          <div style="display: flex; justify-content: center;">
            <form id="userForm">
                <div>
                    <input name="first_name" id="first" placeholder="Enter first name" style="width: 300px; height: 30px; " />
                    <div style="height: 20px;"><span id="Aerr" style="font-size: .6rem; color: red;"></span></div>
                </div>
                <div>
                    <input name="last_name" id="last" placeholder="Enter last name" style="width: 300px; height: 30px; "/>
                    <div style="height: 20px;"><span id="Berr" style="font-size: .6rem; color: red;"></span></div>
                </div>
                <div> 
                    <input name="email" id="email" placeholder="Enter email address" style="width: 300px; height: 30px; "/>
                    <div style="height: 20px;"><span id="Cerr" style="font-size: .6rem; color: red;"></span></div>
                </div>
                <div>
                    <input name="phone" id="phone" type="number" placeholder="Enter phone number" style="width: 300px; height: 30px; "/>
                    <div style="height: 20px;"><span id="Derr" style="font-size: .6rem; color: red;"></span></div>
                </div>
              
                <div>
                    <input name="password" id="password" placeholder="Enter password" style="width: 300px; height: 30px; "/> 
                    <div style="height: 20px;"><span id="Ierr" style="font-size: .6rem; color: red;"></span></div>
                </div>
                
               
               <div style="margin-left: 180px; margin-top: 15px;">
                <a href="login.html" style="color: black; text-decoration: none;">
                    <span class="have">Already have an account!!</span>
                 </a>
               </div>
         
                <button style="cursor: pointer; margin-left: 30px; margin-bottom: 90px; margin-top: 10px; width: 70px; height: 30px; background-color: black; color: white; border: none; border-radius: 5px;">Register</button>
            </form>
          </div>
        </div>

    <!-- <div class="container">
        <form action="" id="userForm">
            <div>
                <label for="">User Name
                    <input type="text" id="nameInput" placeholder="Enter user name">

                </label>
                <span id="aErr" class="error"></span>
            </div>
            <div>
                <label for="">Password
                    <input type="password" id="passwordInput" placeholder="Enter password">

                </label>
                <span id="bErr" class="error"></span>
            </div>
            <div>
                <label for=""> Confirm Password
                    <input type="password" id="password2Input" placeholder="Enter password Again">

                </label>
                <span id="cErr" class="error"></span>
            </div>


            <div>
                <label for="">Email
                    <input type="text" id="emailInput" placeholder="Enter Email ">

                </label>
                <span id="dErr" class="error"></span>
            </div>


            <div>
                <label for=""> Number
                    <input type="number" id="numberInput" placeholder="Enter Phone Number">

                </label>
                <span id="eErr" class="error"></span>
            </div>

            <p>Have an account? <a href="login.html" class="signup">Login</a></p>

            <button id="btnSignup">Sign up</button>
        </form>
    </div> -->

<script src="js/log.js"></script>
    <script>
       
       $(document).ready(function () {
        console.log('try signing up')
            let baseUrl = 'http://e-commerce.reworkstaging.name.ng/v2'
            $('#userForm').on('submit', function (e) {
                let valid = true;
                e.preventDefault()
                let emailRegex = /^([a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})$/;
                let passRegex = /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*\W)(?!.*Â ).{8,16}$/;
                let first = $('#first').val()
                let last = $('#last').val()
                let name = $('#name').val()
                let email = $('#email').val()
                let phone = $('#phone').val()
                let password = $('#password').val()
                let description = $('#description').val()

                let Aerr = $('#Aerr')
                let Berr = $('#Berr')
                let Cerr = $('#Cerr')
                let Derr = $('#Derr')
                let Eerr = $('#Eerr')
                let Ierr = $('#Ierr')
                let Ferr = $('#Ferr')
                if(first === ""){
                    Aerr.text('First Name Canot Be Empty')
                    valid = false
                }else{
                    Aerr.text('')
                }if(last === ""){
                    Berr.text('Last Name Cannot Be Empty')
                    valid = false
                }else{
                    Berr.text('')
                }if(name === ""){
                    Eerr.text('Store Cannot Be Empty')
                    valid = false
                }else{
                    Eerr.text('')
                }if(email === ""){
                    Cerr.text('Please Enter an Email Address')
                    valid = false
                }else if(!emailRegex.test(email)){
                    Cerr.text('Please Entebr a Correct Email Address')
                    valid = false
                }else{
                    Cerr.text('')
                }if(password === ""){
                    Ierr.text('Please Enter a Password')
                    valid = false
                }else if(!passRegex.test(password)){
                    Ierr.text('Password must contain 1-9, A-Z, a-z and !')
                    valid = false
                }else{
                    Ierr.text('')
                }if(phone === ""){
                    Derr.text('Please Enter a Phone Number')
                    valid = false
                }else{
                    Derr.text('')
                }if(description === ""){
                    Ferr.text('Please write down a description')
                    valid = false
                }else{
                    Ferr.text('')
                }
                if(valid == true){
                $.ajax({
                    url: 'http://ecommerce.reworkstaging.name.ng/v2/users',
                    type: 'POST',
                    contentType: "application/json",
                    data: JSON.stringify({
                        first_name: first,
                        last_name: last,
                        password: password,
                        email: email,
                        phone: phone,
                        descp: description,
                        name: name,
                    }),
                    // processData: false,
                    success: function (res) {
                        alert('Registration Successful!')
                        console.log(res)
                        window.location.href="index.html"
                    },
                    error: function (error) {
                        console.log(error)
                        alert('Registration failed ' + error)
                        // console.log(error)
                    }
                })
            }else{
                
            }

            })
        })

          

    </script>
</body>

</html>